  <div class="col-md-12">
    <div class="card mb-3">

      <div class="card-header card-info">
        <ul class="nav nav-tabs card-header-tabs">
          <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#baru" role="tab" style="color: black;">
              <i class="fa fa-address-book" aria-hidden="true"></i> Pasien Baru
            </a>
          </li>             
          <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#lama" role="tab" style="color: black;">
              <i class="fa fa-address-book-o" aria-hidden="true"></i> Pasien Lama
            </a>
          </li>
        </ul>
      </div>

      <div class="card-block">
        <div class="tab-content">

          <div class="tab-pane fade show active" id="baru" role="tabpanel">
            <div class="card-text">
                <form #pasienBaruForm="ngForm">
                  <div class="form-group">
                    <label for="name">Nama *</label>
                    <input type="text" class="form-control" id="name" required [(ngModel)]="model.nama" name="name">
                  </div>

                  <div class="form-group">
                    <label for="gender">Jenis Kelamin</label>
                    <select class="form-control" id="gender" [(ngModel)]="model.jender" name="gender">
                      <option *ngFor="let gender of genders" [value]="gender">{{gender}}</option>
                    </select>
                  </div>

                  <div>
                    <label for="dob">Tanggal Lahir</label>
                    <input [dpDayPicker]="config" [(ngModel)]="model.tanggal_lahir" id="dob" class="form-control" theme="dp-material" name="dob">
                  </div>

                  <div class="form-group">
                    <label for="religion">Agama</label>
                    <select class="form-control" id="religion" [(ngModel)]="model.agama" name="religion">
                      <option *ngFor="let religion of religions" [value]="religion">{{religion}}</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="address">Alamat</label>
                    <textarea class="form-control" id="address" [(ngModel)]="model.alamat" name="address"></textarea>
                  </div>

                  <div class="form-group">
                    <label for="phone">Kontak</label>
                    <input type="tel" class="form-control" id="phone" [(ngModel)]="model.kontak" name="phone">
                  </div>

                  <div *ngIf="rujukan" class="form-group">
                    <label for="no_rujukan">Nomor Rujukan</label>
                    <input type="string" class="form-control" id="no_rujukan" [(ngModel)]="no_rujukan" name="no_rujukan" required>
                  </div>

                  <div *ngIf="asuransi" class="form-group">
                    <label for="no_asuransi">Nomor Asuransi</label>
                    <input type="string" class="form-control" id="no_asuransi" [(ngModel)]="no_asuransi" name="no_asuransi" required>
                  </div>

                  <div class="form-group">
                    <label for="poliklinik">Layanan</label>
                    <select class="form-control" id="poliklinik" [(ngModel)]="poliklinik" name="poliklinik" required>
                      <ng-container *ngFor="let poliklinik of allPoliklinik">
                        <option *ngIf="poliklinik.sisa_pelayanan > 0" [value]="poliklinik.nama">{{poliklinik.nama}}</option>
                      </ng-container>
                    </select>
                  </div>

                  <div *ngIf="poliklinik" class="form-group">
                    <label for="doctor">Doktor</label>
                    <select class="form-control" id="doctor" [(ngModel)]="doctor" name="doctor" required>
                      <option *ngFor="let doctor of doctors" [value]="doctor">{{doctor}}</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label>Opsi Tambahan :   </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" [checked]="rujukan" (change)="rujukan = !rujukan">
                      <span class="custom-control-indicator"></span>
                      <span class="custom-control-description">Rujukan</span>
                    </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" [checked]="asuransi" (change)="asuransi = !asuransi">
                      <span class="custom-control-indicator"></span>
                      <span class="custom-control-description">Asuransi</span>
                    </label>
                  </div>

                  <button type="button" class="btn btn-success" (click) = "save()" [disabled]="!pasienBaruForm.form.valid">Simpan</button>
                </form>
            </div>
          </div>

          <div class="tab-pane fade" id="lama" role="tabpanel">
            <div class="card-text">

                <div class="form-group">
                  <label for="search">Cari Pasien</label>
                  <div class="input-group">
                    <input type="text" class="form-control" id="search" [(ngModel)]="search" placeholder="Masukkan id/nama pasien untuk memulai pencarian">
                    <span class="input-group-btn">
                      <button class="btn btn-secondary" type="button">Mulai</button>
                    </span>
                  </div>
                </div>

                <div class="form-group">
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" [checked]="update" (change)="update = !update">
                      <span class="custom-control-indicator"></span>
                      <span class="custom-control-description">Perbarui Data</span>
                    </label>
                  </div>

                <form *ngIf="search" #pasienLamaForm="ngForm">
                  <div class="form-group">
                    <label for="name">Nama</label>
                    <input *ngIf="update" type="text" class="form-control" id="name" required [(ngModel)]="model.nama" name="name">
                    <input *ngIf="!update" type="text" class="form-control" id="name" required [(ngModel)]="model.nama" name="name" disabled>
                  </div>

                  <div class="form-group">
                    <label for="gender">Jenis Kelamin</label>
                    <select *ngIf="update" class="form-control" id="gender" [(ngModel)]="model.jender" name="gender">
                      <option *ngFor="let gender of genders" [value]="gender">{{gender}}</option>
                    </select>
                    <select *ngIf="!update" class="form-control" id="gender" [(ngModel)]="model.jender" name="gender" disabled>
                      <option *ngFor="let gender of genders" [value]="gender">{{gender}}</option>
                    </select>
                  </div>

                  <div>
                    <label for="dob">Tanggal Lahir</label>
                    <input *ngIf="update" [dpDayPicker]="config" [(ngModel)]="model.tanggal_lahir" id="dob" class="form-control" theme="dp-material" name="dob">
                    <input *ngIf="!update" [dpDayPicker]="config" [(ngModel)]="model.tanggal_lahir" id="dob" class="form-control" theme="dp-material" name="dob" disabled>
                  </div>

                  <div class="form-group">
                    <label for="religion">Agama</label>
                    <select *ngIf="update" class="form-control" id="religion" [(ngModel)]="model.agama" name="religion">
                      <option *ngFor="let religion of religions" [value]="religion">{{religion}}</option>
                    </select>
                    <select *ngIf="!update" class="form-control" id="religion" [(ngModel)]="model.agama" name="religion" disabled>
                      <option *ngFor="let religion of religions" [value]="religion">{{religion}}</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="address">Alamat</label>
                    <textarea *ngIf="update" class="form-control" id="address" [(ngModel)]="model.alamat" name="address"></textarea>
                    <textarea *ngIf="!update" class="form-control" id="address" [(ngModel)]="model.alamat" name="address" disabled></textarea>
                  </div>

                  <div class="form-group">
                    <label for="phone">Kontak</label>
                    <input *ngIf="update" type="tel" class="form-control" id="phone" [(ngModel)]="model.kontak" name="phone">
                    <input *ngIf="!update" type="tel" class="form-control" id="phone" [(ngModel)]="model.kontak" name="phone" disabled>
                  </div>

                  <div *ngIf="asuransi">
                    <div class="form-group" *ngFor="let noAsuransi of model.no_asuransi; let i = index; trackBy: customTrackBy ">           
                      <label for="no_asuransi">Nomor Asuransi {{i + 1}}</label>
                      <div class="input-group">
                        <input *ngIf="update" type="text" class="form-control" name="no_asuransi" [(ngModel)]= "model.no_asuransi[i]" value="{{noAsuransi}}">
                        <input *ngIf="!update" type="text" class="form-control" name="no_asuransi" value="{{noAsuransi}}" disabled>
                        <span class="input-group-btn">
                          <button class="btn btn-secondary" type="button" (click)="pakaiAsuransi(noAsuransi)">Pakai</button>
                        </span>
                      </div>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="no_asuransi">Nomor Asuransi yang dipakai</label>
                    <input type="string" class="form-control" id="no_asuransi" [(ngModel)]="no_asuransi" name="no_asuransi" required>
                  </div>

                  <div *ngIf="rujukan" class="form-group">
                    <label for="no_rujukan">Nomor Rujukan</label>
                    <input type="string" class="form-control" id="no_rujukan" [(ngModel)]="no_rujukan" name="no_rujukan" required>
                  </div>

                  <div class="form-group">
                    <label for="poliklinik">Layanan</label>
                    <select class="form-control" id="poliklinik" [(ngModel)]="poliklinik" name="poliklinik" required>
                      <ng-container *ngFor="let poliklinik of allPoliklinik">
                        <option *ngIf="poliklinik.sisa_pelayanan > 0" [value]="poliklinik.nama">{{poliklinik.nama}}</option>
                      </ng-container>
                    </select>
                  </div>

                  <div *ngIf="poliklinik" class="form-group">
                    <label for="doctor">Doktor</label>
                    <select class="form-control" id="doctor" [(ngModel)]="doctor" name="doctor" required>
                      <option *ngFor="let doctor of doctors" [value]="doctor">{{doctor}}</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label>Opsi Tambahan :  </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" [checked]="rujukan" (change)="rujukan = !rujukan">
                      <span class="custom-control-indicator"></span>
                      <span class="custom-control-description">Rujukan</span>
                    </label>
                    <label class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" [checked]="asuransi" (change)="asuransi = !asuransi">
                      <span class="custom-control-indicator"></span>
                      <span class="custom-control-description">Asuransi</span>
                    </label>
                  </div>

                  <button type="button" class="btn btn-success" (click)="save()" [disabled]="!pasienLamaForm.form.valid">Simpan</button>
                </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>